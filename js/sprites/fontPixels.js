// Bitmap Font - 5 wide x 7 tall per character
// Palette.ui: 7=white (foreground), 0=transparent

export const characters = {
    'A': [[0,7,7,7,0],[7,0,0,0,7],[7,0,0,0,7],[7,7,7,7,7],[7,0,0,0,7],[7,0,0,0,7],[7,0,0,0,7]],
    'B': [[7,7,7,7,0],[7,0,0,0,7],[7,0,0,0,7],[7,7,7,7,0],[7,0,0,0,7],[7,0,0,0,7],[7,7,7,7,0]],
    'C': [[0,7,7,7,0],[7,0,0,0,7],[7,0,0,0,0],[7,0,0,0,0],[7,0,0,0,0],[7,0,0,0,7],[0,7,7,7,0]],
    'D': [[7,7,7,7,0],[7,0,0,0,7],[7,0,0,0,7],[7,0,0,0,7],[7,0,0,0,7],[7,0,0,0,7],[7,7,7,7,0]],
    'E': [[7,7,7,7,7],[7,0,0,0,0],[7,0,0,0,0],[7,7,7,7,0],[7,0,0,0,0],[7,0,0,0,0],[7,7,7,7,7]],
    'F': [[7,7,7,7,7],[7,0,0,0,0],[7,0,0,0,0],[7,7,7,7,0],[7,0,0,0,0],[7,0,0,0,0],[7,0,0,0,0]],
    'G': [[0,7,7,7,0],[7,0,0,0,7],[7,0,0,0,0],[7,0,7,7,7],[7,0,0,0,7],[7,0,0,0,7],[0,7,7,7,0]],
    'H': [[7,0,0,0,7],[7,0,0,0,7],[7,0,0,0,7],[7,7,7,7,7],[7,0,0,0,7],[7,0,0,0,7],[7,0,0,0,7]],
    'I': [[0,7,7,7,0],[0,0,7,0,0],[0,0,7,0,0],[0,0,7,0,0],[0,0,7,0,0],[0,0,7,0,0],[0,7,7,7,0]],
    'J': [[0,0,7,7,7],[0,0,0,7,0],[0,0,0,7,0],[0,0,0,7,0],[0,0,0,7,0],[7,0,0,7,0],[0,7,7,0,0]],
    'K': [[7,0,0,0,7],[7,0,0,7,0],[7,0,7,0,0],[7,7,0,0,0],[7,0,7,0,0],[7,0,0,7,0],[7,0,0,0,7]],
    'L': [[7,0,0,0,0],[7,0,0,0,0],[7,0,0,0,0],[7,0,0,0,0],[7,0,0,0,0],[7,0,0,0,0],[7,7,7,7,7]],
    'M': [[7,0,0,0,7],[7,7,0,7,7],[7,0,7,0,7],[7,0,0,0,7],[7,0,0,0,7],[7,0,0,0,7],[7,0,0,0,7]],
    'N': [[7,0,0,0,7],[7,7,0,0,7],[7,0,7,0,7],[7,0,0,7,7],[7,0,0,0,7],[7,0,0,0,7],[7,0,0,0,7]],
    'O': [[0,7,7,7,0],[7,0,0,0,7],[7,0,0,0,7],[7,0,0,0,7],[7,0,0,0,7],[7,0,0,0,7],[0,7,7,7,0]],
    'P': [[7,7,7,7,0],[7,0,0,0,7],[7,0,0,0,7],[7,7,7,7,0],[7,0,0,0,0],[7,0,0,0,0],[7,0,0,0,0]],
    'Q': [[0,7,7,7,0],[7,0,0,0,7],[7,0,0,0,7],[7,0,0,0,7],[7,0,7,0,7],[7,0,0,7,0],[0,7,7,0,7]],
    'R': [[7,7,7,7,0],[7,0,0,0,7],[7,0,0,0,7],[7,7,7,7,0],[7,0,7,0,0],[7,0,0,7,0],[7,0,0,0,7]],
    'S': [[0,7,7,7,0],[7,0,0,0,7],[7,0,0,0,0],[0,7,7,7,0],[0,0,0,0,7],[7,0,0,0,7],[0,7,7,7,0]],
    'T': [[7,7,7,7,7],[0,0,7,0,0],[0,0,7,0,0],[0,0,7,0,0],[0,0,7,0,0],[0,0,7,0,0],[0,0,7,0,0]],
    'U': [[7,0,0,0,7],[7,0,0,0,7],[7,0,0,0,7],[7,0,0,0,7],[7,0,0,0,7],[7,0,0,0,7],[0,7,7,7,0]],
    'V': [[7,0,0,0,7],[7,0,0,0,7],[7,0,0,0,7],[7,0,0,0,7],[0,7,0,7,0],[0,7,0,7,0],[0,0,7,0,0]],
    'W': [[7,0,0,0,7],[7,0,0,0,7],[7,0,0,0,7],[7,0,0,0,7],[7,0,7,0,7],[7,7,0,7,7],[7,0,0,0,7]],
    'X': [[7,0,0,0,7],[7,0,0,0,7],[0,7,0,7,0],[0,0,7,0,0],[0,7,0,7,0],[7,0,0,0,7],[7,0,0,0,7]],
    'Y': [[7,0,0,0,7],[7,0,0,0,7],[0,7,0,7,0],[0,0,7,0,0],[0,0,7,0,0],[0,0,7,0,0],[0,0,7,0,0]],
    'Z': [[7,7,7,7,7],[0,0,0,0,7],[0,0,0,7,0],[0,0,7,0,0],[0,7,0,0,0],[7,0,0,0,0],[7,7,7,7,7]],
    '0': [[0,7,7,7,0],[7,0,0,0,7],[7,0,0,7,7],[7,0,7,0,7],[7,7,0,0,7],[7,0,0,0,7],[0,7,7,7,0]],
    '1': [[0,0,7,0,0],[0,7,7,0,0],[0,0,7,0,0],[0,0,7,0,0],[0,0,7,0,0],[0,0,7,0,0],[0,7,7,7,0]],
    '2': [[0,7,7,7,0],[7,0,0,0,7],[0,0,0,0,7],[0,0,0,7,0],[0,0,7,0,0],[0,7,0,0,0],[7,7,7,7,7]],
    '3': [[0,7,7,7,0],[7,0,0,0,7],[0,0,0,0,7],[0,0,7,7,0],[0,0,0,0,7],[7,0,0,0,7],[0,7,7,7,0]],
    '4': [[0,0,0,7,0],[0,0,7,7,0],[0,7,0,7,0],[7,0,0,7,0],[7,7,7,7,7],[0,0,0,7,0],[0,0,0,7,0]],
    '5': [[7,7,7,7,7],[7,0,0,0,0],[7,7,7,7,0],[0,0,0,0,7],[0,0,0,0,7],[7,0,0,0,7],[0,7,7,7,0]],
    '6': [[0,7,7,7,0],[7,0,0,0,0],[7,0,0,0,0],[7,7,7,7,0],[7,0,0,0,7],[7,0,0,0,7],[0,7,7,7,0]],
    '7': [[7,7,7,7,7],[0,0,0,0,7],[0,0,0,7,0],[0,0,7,0,0],[0,0,7,0,0],[0,0,7,0,0],[0,0,7,0,0]],
    '8': [[0,7,7,7,0],[7,0,0,0,7],[7,0,0,0,7],[0,7,7,7,0],[7,0,0,0,7],[7,0,0,0,7],[0,7,7,7,0]],
    '9': [[0,7,7,7,0],[7,0,0,0,7],[7,0,0,0,7],[0,7,7,7,7],[0,0,0,0,7],[0,0,0,0,7],[0,7,7,7,0]],
    ' ': [[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0]],
    '!': [[0,0,7,0,0],[0,0,7,0,0],[0,0,7,0,0],[0,0,7,0,0],[0,0,7,0,0],[0,0,0,0,0],[0,0,7,0,0]],
    ':': [[0,0,0,0,0],[0,0,7,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,0,0,0],[0,0,7,0,0],[0,0,0,0,0]],
};

// Renders text string as a 2D pixel array
export function textPixels(text) {
    const uppercased = text.toUpperCase();
    const charGrids = [];
    for (const ch of uppercased) {
        charGrids.push(characters[ch] || characters[' ']);
    }
    if (charGrids.length === 0) return [];

    const charWidth = 5;
    const charHeight = 7;
    const spacing = 1;
    const totalWidth = charGrids.length * charWidth + (charGrids.length - 1) * spacing;

    const result = [];
    for (let r = 0; r < charHeight; r++) {
        result.push(new Array(totalWidth).fill(0));
    }

    for (let i = 0; i < charGrids.length; i++) {
        const xOffset = i * (charWidth + spacing);
        const grid = charGrids[i];
        for (let row = 0; row < charHeight; row++) {
            for (let col = 0; col < charWidth; col++) {
                result[row][xOffset + col] = grid[row][col];
            }
        }
    }

    return result;
}
